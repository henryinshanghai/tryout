ç›®çš„ï¼šè®¤è¯å½“å‰ç”¨æˆ·ï¼›
æ‰‹æ®µï¼šè¦æ±‚ç”¨æˆ· é€šè¿‡HTMLè¡¨å• æä¾›è‡ªå·±çš„ç”¨æˆ·å & å¯†ç ï¼›

è®¤çŸ¥ï¼šè¿™ä¸ªæµç¨‹æ˜¯ ä» SecurityFilterChainçš„æµç¨‹ä¸­ï¼Œæ‰©å±•å‡ºæ¥çš„
    #1 [Client -> (Filters) -> Servlet];
    #2 Delegating_Filter_Proxy -> FilterChain_Proxy -> Security_FilterChain
        #1 Delegating_Filter_Proxy åœ¨ org.springframework.web.filteråŒ…ä¸‹ï¼›
        #2 FilterChain_Proxy åœ¨ org.springframework.web.filteråŒ…ä¸‹ã€‚
        #3 Security_FilterChain åœ¨ org.springframework.security.web åŒ…ä¸‹ã€‚

Spring Securityä¸­çš„ è¡¨å•å½¢å¼çš„ç™»å½• æµç¨‹ï¼š
--- è®¿é—®æœªæˆæƒçš„é¡µé¢ ğŸ‘‡ ---
#1 ç”¨æˆ·åœ¨æœªç™»å½•çŠ¶æ€ä¸‹ å‘ä¸€ä¸ªæ²¡æœ‰è¢«æˆæƒçš„èµ„æºå‘èµ·è¯·æ±‚ï¼›
#2 #1ä¸­çš„è¯·æ±‚ä¼šè¢«æ‹’ç» - æ‰‹æ®µï¼š FilterSecurityInterceptor ä¼šæŠ›å‡ºä¸€ä¸ª AccessDeniedExceptionï¼Œ ä»¥æ­¤æ¥è¡¨ç¤ºè¯·æ±‚è¢«æ‹’ç»ï¼›
#3 å‘clientå‘é€ä¸€ä¸ªé‡å®šå‘ å¹¶ å¼€å¯è®¤è¯ - æ‰‹æ®µï¼šExceptionTranslationFilter ä¼š ä½¿ç”¨ AuthenticationEntry æ¥è¦æ±‚ç”¨æˆ·è¾“å…¥è®¤è¯ä¿¡æ¯ï¼›
#4 æµè§ˆå™¨å‘ ç™»å½•é¡µé¢å‘èµ·é‡å®šå‘è¯·æ±‚ï¼›
#5 æ¸²æŸ“ç™»å½•é¡µé¢ï¼Œè¿”å›ç»™ clientã€‚

è®¤è¯†ï¼š
    æ ¸å¿ƒæ¨¡å‹#1 Authentication - è¡¨ç¤º è®¤è¯è¯·æ±‚çš„ä»£å¸ æˆ–è€… ä¸€ä¸ªå·²ç»è¢«è®¤è¯è¿‡çš„ä¸»ä½“
    æ ¸å¿ƒæ¨¡å‹#2 AuthenticationManager - å¤„ç† Authentication è¯·æ±‚

--- ç”¨æˆ·æä¾›è®¤è¯ä¿¡æ¯åï¼Œå¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œè®¤è¯ ---
å…¥å£ç±»ï¼š UsernamePasswordAuthenticationFilter (ä½œä¸º SecurityFilterChainä¸­çš„æŸä¸€ä¸ª Filter)ï¼›
#1 æŠŠç”¨æˆ·æä¾›çš„è®¤è¯ä¿¡æ¯ï¼Œåˆ›å»ºæˆä¸ºä¸€ä¸ª UsernamePasswordAuthenticationTokenå¯¹è±¡ï¼ˆAuthenticationçš„å­ç±»å‹ï¼‰ï¼›
#2 #1ä¸­çš„tokenå¯¹è±¡ è¢«ä¼ é€’ç»™ AuthenticationManagerå®ä¾‹ æ¥ è¿›è¡Œè®¤è¯ï¼›
#3 è®¤è¯å¤±è´¥ - {123}
#4 è®¤è¯æˆåŠŸ - {12345}

ç‰¹å¾ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ Spring Securityçš„è¡¨å•ç™»å½•æ˜¯å¯ç”¨çš„ã€‚
ä½†æ˜¯ å¦‚æœå¼€å‘è€…æä¾›äº† ä»»ä½•åŸºäºServletçš„é…ç½®ï¼Œåˆ™ï¼šå¿…é¡»è¦æ˜¾å¼åœ° æä¾› åŸºäºè¡¨å•çš„ç™»å½•ï¼›

æ˜¾å¼é…ç½® åŸºäºè¡¨å•çš„ç™»å½• ä»£ç ï¼š
    public SecurityFilterChain filterChain(HttpSecurity http) {
        http
            .formLogin(withDefaults());
        // ...
    }

åœ¨ä½¿ç”¨ Spring MVCæ—¶ï¼ŒæŠŠ GET /loginè¯·æ±‚ æ˜ å°„åˆ° ç™»å½•æ¨¡æ¿ä¸Šï¼š
    @Controller
    class LoginController {
        @GetMapping("/login")
        String login() {
            return "login";
        }
    }
