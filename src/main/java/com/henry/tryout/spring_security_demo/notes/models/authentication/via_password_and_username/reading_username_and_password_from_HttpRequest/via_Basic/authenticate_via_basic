via basic æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
ç­”ï¼šThe 'Basic' HTTP Authentication Schemeï¼›
ä½œç”¨ï¼šå®šä¹‰ Basic è¶…æ–‡æœ¬ä¼ è¾“åè®®çš„è®¤è¯ schema - RFC7617

åœ¨ Spring Securityä¸­ HTTPåŸºç¡€è®¤è¯æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ
æœ¯è¯­ï¼šWWW-Authenticate
ä½œç”¨ï¼šThe "WWW-Authenticate" header field indicates the authentication
      scheme(s) and parameters applicable to the target resource.
ç¿»è¯‘ï¼šWWW-Authenticate è¿™ä¸ªheaderå­—æ®µ ç”¨æ¥è¡¨æ˜ åº”ç”¨åˆ°ç›®æ ‡èµ„æºä¸Šçš„ è®¤è¯çš„schema ä»¥åŠ å‚æ•°ï¼›

è®¤è¯†ï¼šè¿™ä¸ªè®¤è¯æµç¨‹ æ˜¯åŸºäº SecurityFilterChain çš„å›¾æ„å»ºçš„ã€‚

--- è®¿é—®æœªæˆæƒçš„é¡µé¢ ğŸ‘‡ ---
#1 ç”¨æˆ·å‘é€ æœªè®¤è¯çš„è¯·æ±‚ åˆ°ä¸€ä¸ªæœªæˆæƒçš„èµ„æºï¼›
#2 è¯·æ±‚è¢«Spring Securityæ‹’ç» - FilterSecurity_Interceptor æŠ›å‡ºä¸€ä¸ª AccessDeniedException æ¥ æ‹’ç»è¯·æ±‚ï¼›
#3 ç”¨æˆ·æœªè¢«è®¤è¯ï¼Œæ‰€ä»¥ ExceptionTranslation_Filter ä¼š å¼€å§‹è®¤è¯è¿‡ç¨‹ï¼š
     BasicAuthenticationEntryPointï¼ˆAuthenticationEntryPointå­ç±»ï¼‰ ä¼šå‘é€ä¸€ä¸ª WWW-Authenticate headerï¼›
     NullRequestCacheï¼ˆRequestCacheå­ç±»ï¼‰ä¸ä¼šä¿å­˜è¯·æ±‚ - å› ä¸ºå®¢æˆ·èƒ½å¤Ÿå†æ¬¡å‘é€å®ƒå¼€å§‹æ—¶å‘å‡ºçš„è¯·æ±‚

--- ç”¨æˆ·æä¾›è®¤è¯ä¿¡æ¯åï¼Œå¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œè®¤è¯ ---
#1 BasicAuthenticationFilter æ ¹æ® HttpServletRequestä¸­ ç”¨æˆ·æä¾›çš„è®¤è¯ä¿¡æ¯ï¼Œæ¥ åˆ›å»º UsernamePasswordAuthenticationTokenå¯¹è±¡ï¼›
#2 æŠŠ tokenå¯¹è±¡(Authenticationç±»å‹) ä¼ é€’åˆ° AuthenticationManagerä¸­(å…·ä½“å“ªä¸€ä¸ªå®ç°ï¼Œå–å†³äº userä¿¡æ¯çš„å­˜å‚¨æ–¹å¼)ï¼›
#3 è®¤è¯å¤±è´¥ - {123}
#4 è®¤è¯æˆåŠŸ - {123}

---
è®¤è¯å¤±è´¥ï¼š
#1 æ¸…é™¤ SecurityContextHolder;
#2 è°ƒç”¨ RememberMeServices.loginFail()æ–¹æ³• - å¦‚æœremember meæ²¡æœ‰è¢«é…ç½®ï¼Œåˆ™ï¼šä¸ä¼šè¿›è¡Œä»»ä½•æ“ä½œ(no-op);
#3 è°ƒç”¨ AuthenticationEntryPoint æ¥ è§¦å‘ å†æ¬¡å‘é€WWW-Authenticate;

---
è®¤è¯æˆåŠŸï¼š
#1 æŠŠ Authentication è®¾ç½®åˆ° SecurityContextHolderä¸­ï¼›
#2 è°ƒç”¨ RememberMeServices.loginSuccess()æ–¹æ³•ï¼›- å¦‚æœremember meæ²¡æœ‰è¢«é…ç½®ï¼Œåˆ™ï¼šä¸ä¼šè¿›è¡Œä»»ä½•æ“ä½œ(no-op);
#3 BasicAuthenticationFilter è°ƒç”¨ FilterChain.doFilter(request, response) æ¥ ç»§ç»­å®Œæˆ å‰©ä½™çš„åº”ç”¨é€»è¾‘ã€‚

ç‰¹å¾ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ Spring Securityçš„ HTTP basicè®¤è¯æ”¯æŒæ˜¯å¼€å¯çš„ã€‚
ä½†æ˜¯ï¼Œå¦‚æœ å¼€å‘è€…æä¾›äº†ä»»ä½•çš„ åŸºäºservletçš„é…ç½®ï¼Œåˆ™ï¼šå¿…é¡»è¦æ˜¾å¼åœ°æä¾› HTTP Basicã€‚

æœ€å°åŒ–çš„ã€æ˜¾å¼çš„(explicit)é…ç½®ï¼š
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) {
        http
            // ä½¿ç”¨çš„æ–¹æ³•æ˜¯ httpBasic()
            .httpBasic(withDefaults());
        return http.build();
    }

