===
else if ((kc == null &&
          (kc = comparableClassFor(k)) == null) ||
         (dir = compareComparables(kc, k, pk)) == 0) {
    if (!searched) {
        TreeNode<K,V> q, ch;
        searched = true;
        if (((ch = p.left) != null &&
             (q = ch.find(h, k, kc)) != null) ||
            ((ch = p.right) != null &&
             (q = ch.find(h, k, kc)) != null))
            return q;
    }
    dir = tieBreakOrder(k, pk);
}

==
 ä¸€ã€ä¸Šä¸‹æ–‡å›é¡¾
åœ¨ putTreeVal() ä¸­ï¼Œå½“å‰æ­£åœ¨éå†çº¢é»‘æ ‘ ä»¥ æŸ¥æ‰¾æ˜¯å¦å·²å­˜åœ¨ ç›¸åŒkeyã€‚
è‹¥ ä¸å­˜åœ¨ï¼Œåˆ™ éœ€ç¡®å®š æ–°èŠ‚ç‚¹åº”æ’å…¥ å·¦å­æ ‘ è¿˜æ˜¯ å³å­æ ‘ã€‚

æ­¤æ—¶å·²çŸ¥ï¼š
â‘  å½“å‰èŠ‚ç‚¹pçš„hash (ph) ä¸ ç›®æ ‡keyçš„ hash(h) ç›¸ç­‰ï¼›
â‘¡ p.key ä¸ ç›®æ ‡ k ä¸ç›¸ç­‰ï¼ˆå¦åˆ™å·²è¿”å›ï¼‰ï¼›
â‘¢ éœ€è¦å†³å®š ä¸‹ä¸€æ­¥ å¾€å·¦ï¼ˆdir = -1ï¼‰ è¿˜æ˜¯ å¾€å³ï¼ˆdir = 1ï¼‰ã€‚
ä½†é—®é¢˜æ¥äº†ï¼š
    hashç›¸åŒï¼Œkeyä¸åŒï¼Œä¸” å¯èƒ½ æ— æ³•æ¯”è¾ƒå¤§å° â†’ è¿™å°±æ˜¯ æœ¬æ®µä»£ç  è¦è§£å†³çš„â€œæ¨¡ç³Šåœ°å¸¦â€ã€‚

==
else if ((kc == null &&
          (kc = comparableClassFor(k)) == null) ||
         (dir = compareComparables(kc, k, pk)) == 0) {

âœ… æ¡ä»¶è§£æï¼ˆè¿™æ˜¯ä¸€ä¸ª å¤åˆæ¡ä»¶ï¼‰
è¿™ä¸ª if åˆ¤æ–­çš„æ˜¯ï¼šâ€œæˆ‘ä»¬ æ— æ³•é€šè¿‡ Comparable æ¥ ç¡®å®š kå’Œpkçš„å¤§å°å…³ç³»â€ã€‚

æ‹†æˆä¸¤éƒ¨åˆ†ï¼š

â–¶ ç¬¬ä¸€éƒ¨åˆ†ï¼škc == null && (kc = comparableClassFor(k)) == null
â‘  å°è¯•è·å– ç›®æ ‡ key k çš„ Comparable ç±»å‹ï¼ˆå¦‚ String.classï¼‰ï¼›
â‘¡ å¦‚æœ k æ²¡æœ‰å®ç° Comparableï¼Œåˆ™ comparableClassFor(k) è¿”å› nullï¼›
â‘¢ æ­¤æ—¶ kc ä»ä¸º null â†’ è¡¨ç¤º å…¶å®Œå…¨ä¸å¯æ¯”ã€‚

â–¶ ç¬¬äºŒéƒ¨åˆ†ï¼š(dir = compareComparables(kc, k, pk)) == 0
    â‘  å³ä½¿ kc != nullï¼ˆkey å¯æ¯”ï¼‰ï¼Œè°ƒç”¨ compareComparables(kc, k, pk) åè¿”å› 0ï¼›
    â‘¡ è¿”å› 0 æ„å‘³ç€ï¼šæŒ‰ Comparable è§„åˆ™ï¼Œä¸¤ä¸ª key â€œç›¸ç­‰â€ï¼ˆä½†å®é™… equals() ä¸ç­‰ï¼ï¼‰ï¼›
    â‘¢ è¿™ç§æƒ…å†µè™½ç½•è§ï¼Œä½†åœ¨è‡ªå®šä¹‰ compareTo() ä¸ equals() ä¸ä¸€è‡´æ—¶å¯èƒ½å‘ç”Ÿã€‚
ğŸ“Œ æ‰€ä»¥æ•´ä¸ª if æ¡ä»¶æˆç«‹ â‡¨ æ— æ³•é€šè¿‡ Comparable åŒºåˆ† k å’Œ pk çš„å¤§å°ã€‚

==
âœ… è¿›å…¥ if å—åçš„é€»è¾‘

if (!searched) {
    TreeNode<K,V> q, ch;
    searched = true;
    if (((ch = p.left) != null &&
         (q = ch.find(h, k, kc)) != null) ||
        ((ch = p.right) != null &&
         (q = ch.find(h, k, kc)) != null))
        return q;
}
ğŸ¯ ç›®çš„ï¼šé˜²æ­¢ å› æ¯”è¾ƒè§„åˆ™ä¸æ˜ç¡® è€Œ æ¼æ‰ å·²å­˜åœ¨çš„ keyï¼
è¿™æ˜¯ æå…¶å…³é”®çš„ å®‰å…¨æœºåˆ¶ã€‚

ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ
    â‘  å› ä¸ºå½“å‰æ— æ³•ç¡®å®š k åº”è¯¥ åœ¨å·¦ è¿˜æ˜¯å³ï¼›
    â‘¡ ä½†çœŸå®çš„ key å¯èƒ½å·²ç»å­˜åœ¨äº å·¦å­æ ‘ æˆ– å³å­æ ‘ä¸­ï¼›
    â‘¢ å¦‚æœ ç›²ç›®é€‰æ‹© ä¸€ä¸ªæ–¹å‘ï¼ˆæ¯”å¦‚å¼ºåˆ¶å·¦ï¼‰ï¼Œå°±å¯èƒ½ æ‰¾ä¸åˆ° å·²å­˜åœ¨çš„èŠ‚ç‚¹ï¼Œå¯¼è‡´ é‡å¤æ’å…¥ï¼

å¦‚ä½•è§£å†³ï¼Ÿ
ä¸€æ¬¡æ€§æœç´¢ å·¦å³å­æ ‘ï¼Œçœ‹æ˜¯å¦å·²æœ‰ åŒ¹é…çš„ keyï¼›
ä½¿ç”¨ find(h, k, kc) æ–¹æ³•ï¼ˆä¼ å…¥å·²æ¢æµ‹çš„ kc æå‡æ•ˆç‡ï¼‰ï¼›
å¦‚æœ åœ¨ä»»ä¸€å­æ ‘ä¸­æ‰¾åˆ°ï¼Œç«‹å³è¿”å› è¯¥èŠ‚ç‚¹ï¼ˆè¯´æ˜ key å·²å­˜åœ¨ï¼Œåº”æ›´æ–° valueï¼‰ã€‚
ğŸ’¡ searched æ˜¯ä¸€ä¸ªå±€éƒ¨ boolean æ ‡å¿—ï¼Œç¡®ä¿ åªåšä¸€æ¬¡ å…¨å­æ ‘æœç´¢ï¼ˆé¿å…æ­»å¾ªç¯ æˆ– é‡å¤å¼€é”€ï¼‰ã€‚

==
âœ… æœ€åä¸€è¡Œï¼šç¡®å®šæ’å…¥æ–¹å‘

dir = tieBreakOrder(k, pk);
    â‘  å¦‚æœå·¦å³å­æ ‘ éƒ½æ²¡æ‰¾åˆ°ï¼ˆè¯´æ˜ key ç¡®å®ä¸å­˜åœ¨ï¼‰ï¼›
    â‘¡ å°±å¿…é¡» å¼ºè¡Œå†³å®šä¸€ä¸ªæ–¹å‘ æ¥ æ’å…¥æ–°èŠ‚ç‚¹ï¼›
    â‘¢ è°ƒç”¨ tieBreakOrder(k, pk)ï¼š

static int tieBreakOrder(Object a, Object b) {
    int d;
    if (a == null || b == null ||
        (d = a.getClass().getName().compareTo(b.getClass().getName())) == 0)
        d = (System.identityHashCode(a) <= System.identityHashCode(b) ? -1 : 1);
    return d;
}

â‘  å…ˆæ¯”ç±»åï¼ˆé¿å…ä¸åŒç±»å‹ä¹±åºï¼‰ï¼›
â‘¡ å†æ¯” identityHashCodeï¼ˆå¯¹è±¡å†…å­˜åœ°å€å“ˆå¸Œï¼ŒåŸºæœ¬å”¯ä¸€ï¼‰ï¼›
â‘¢ ä¿è¯ ä»»æ„ä¸¤ä¸ªå¯¹è±¡ éƒ½èƒ½ æ’å‡ºç¨³å®šé¡ºåºã€‚
âš ï¸ æ³¨æ„ï¼štieBreakOrder ä¸æ˜¯ä¸ºäº†â€œæ­£ç¡®æ€§â€ï¼Œè€Œæ˜¯ä¸ºäº† ç»“æ„ç¨³å®šæ€§ â€”â€” ç¡®ä¿ åŒä¸€ç»„ key å¤šæ¬¡æ’å…¥åï¼Œæ ‘ç»“æ„ä¸€è‡´ã€‚

==
âœ… å››ã€è®¾è®¡äº®ç‚¹æ€»ç»“
æœºåˆ¶	            |   ä½œç”¨
searched æ ‡å¿—	|   é¿å… é‡å¤ å…¨æ ‘æœç´¢ï¼Œæ§åˆ¶å¼€é”€
åŒå‘å­æ ‘æŸ¥æ‰¾	    |   é˜²æ­¢å› æ¯”è¾ƒæ¨¡ç³Š å¯¼è‡´ æ¼æŸ¥ å·²å­˜åœ¨çš„key
tieBreakOrder	|   åœ¨ å®Œå…¨ä¸å¯æ¯” æ—¶ æä¾› ç¡®å®šæ€§æ’åºï¼Œç»´æŒ æ ‘ç»“æ„ç¨³å®š
å¤ç”¨ find()	    |   ä¿è¯ æŸ¥æ‰¾é€»è¾‘ ä¸ get() ä¸€è‡´ï¼Œé¿å…ä¸ä¸€è‡´ bug

==
âœ… äº”ã€ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤æ‚ï¼Ÿâ€”â€”æ ¹æœ¬åŸå› 
HashMap çš„çº¢é»‘æ ‘ ä¸æ˜¯ ä¸ºâ€œæ’åºâ€è€Œç”Ÿï¼Œè€Œæ˜¯ä¸º â€œåœ¨ hash å†²çªä¸¥é‡æ—¶ ä¿æŒ O(log n) æ€§èƒ½â€ è€Œç”Ÿã€‚

â‘  å®ƒä¸èƒ½å‡è®¾ key å¯æ¯”ï¼ˆå› ä¸º HashMap æ”¯æŒä»»æ„ keyï¼‰ï¼›
â‘¡ ä½†åˆå¿…é¡»æ„å»º ä¸€æ£µæœ‰æ•ˆçš„ BSTï¼›
â‘¢ æ‰€ä»¥å¿…é¡» åœ¨ â€œé€šç”¨æ€§â€ å’Œ â€œç»“æ„æœ‰æ•ˆæ€§â€ ä¹‹é—´ åšç²¾ç»†å¹³è¡¡ã€‚
è¿™æ®µä»£ç æ­£æ˜¯ è¿™ç§å¹³è¡¡çš„ä½“ç°ï¼šå®å¯ å¤šæŸ¥ä¸€æ¬¡ï¼Œä¹Ÿä¸æ„¿æ¼æ‰ ä¸€ä¸ªå·²å­˜åœ¨çš„ keyã€‚

âœ… å…­ã€ä¸€å¥è¯æ€»ç»“
å½“ â‘  hash ç›¸åŒ ä¸” â‘¡ key æ— æ³•é€šè¿‡ Comparable åŒºåˆ† æ—¶ï¼Œ
#1 å…ˆå½»åº•æœç´¢ å·¦å³å­æ ‘ ä»¥é˜²æ¼æŸ¥ï¼›
#2 å†ç”¨ ç»ˆæè§„åˆ™ï¼ˆç±»å + identityHashCodeï¼‰å¼ºè¡Œå†³å®š æ’å…¥æ–¹å‘ã€‚