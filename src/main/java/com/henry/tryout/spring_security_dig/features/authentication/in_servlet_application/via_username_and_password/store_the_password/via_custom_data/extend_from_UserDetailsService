UserDetailsServiceå®˜ç½‘è¯¦æƒ…ï¼š
è¢« DaoAuthenticationProvider ä½¿ç”¨ï¼Œç”¨æ¥ åœ¨ä½¿ç”¨username&passwordçš„è®¤è¯æ–¹å¼è¿›è¡Œè®¤è¯æ—¶ï¼Œè·å– usernameã€passwordä»¥åŠå…¶ä»–å±æ€§

å¯¹äº UserDetailsServiceï¼Œ Security æä¾›äº† in-memoryã€JDBCä¸¤ç§å®ç°ï¼›
ä½ å¯ä»¥ é€šè¿‡æŠŠ è‡ªå®šä¹‰çš„ UserDetailsService æš´éœ²æˆä¸ºä¸€ä¸ªbean æ¥ å®šä¹‰è‡ªå®šä¹‰çš„è®¤è¯é€»è¾‘ï¼›
ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å±•ç¤ºäº† è‡ªå®šä¹‰çš„è®¤è¯ - å‡è®¾ CustomUserDetailsService å®ç°äº† UserDetailsService

ğŸ– åªæœ‰åœ¨ #1 AuthenticationManagerBuilder æ²¡æœ‰è¢«å¡«å…… å¹¶ä¸” #2 æ²¡æœ‰å®šä¹‰ AuthenticationProviderBean çš„æ—¶å€™ï¼Œä¸‹é¢çš„ä»£ç æ‰ä¼šè¢«ä½¿ç”¨ ğŸ‘‡
--- è‡ªå®šä¹‰çš„ UserDetailsService Bean ---
@Bean
CustomUserDetailsService customUserDetailsService() {
	return new CustomUserDetailsService();
}

===
UserDetailså®˜ç½‘è¯¦æƒ…ï¼š

è¢« UserDetailsService è¿”å›ã€‚
DaoAuthenticationProvider ä¼šæ ¡éªŒ UserDetailsï¼Œç„¶å
è¿”å›ä¸€ä¸ªåŒ…å«æœ‰ principalçš„ Authentication(å…¶ä¸­çš„principal å…¶å®å°±æ˜¯ ç”±é…ç½®çš„ UserDetailsServiceæ‰€è¿”å›çš„ UserDetails)

===
PasswordEncoderå®˜ç½‘è¯¦æƒ…ï¼š

Security å¯¹ Servletçš„æ”¯æŒ åŒ…æ‹¬ é€šè¿‡é›†æˆPasswordEncoder æ¥ å®‰å…¨åœ°å­˜å‚¨å¯†ç ã€‚
åŒæ ·åœ°ï¼Œé€šè¿‡æš´éœ²ä¸€ä¸ª PasswordEncoder Beanï¼Œå¼€å‘è€… å¯ä»¥å®šåˆ¶ è¢«Securityæ‰€ä½¿ç”¨çš„ PasswordEncoderçš„å®ç°ã€‚

======
DaoAuthenticationProvider å®˜ç½‘è¯¦æƒ…

æ˜¯ï¼šä¸€ä¸ª AuthenticationProviderçš„å®ç°ç±»ï¼›
ä½œç”¨ï¼šä½¿ç”¨ UserDetailsService ä¸  PasswordEncoder æ¥ è®¤è¯ username ä¸ passwordï¼›
å·¥ä½œåŸç†/æµç¨‹ï¼š
#1 ç”¨äºè®¤è¯çš„Filter(å…·ä½“æ˜¯å“ªä¸ªFilter ç”±å­˜å‚¨çš„æ–¹å¼å†³å®š) ä¼š å‘ ProviderManager(ä¸€ä¸ªAuthenticationManagerå®ç°) ä¼ å…¥ä¸€ä¸ª tokenå¯¹è±¡ï¼›
#2 ProviderManager è¢«é…ç½® ä½¿ç”¨ DaoAuthenticationProvider å®ç°ç±»ï¼›
#3 DaoAuthenticationProvider ä» UserDetailsService æ¥ æŸ¥æ‰¾ UserDetailsï¼›
#4 provider ä½¿ç”¨ PasswordEncoder æ¥ æ ¡éªŒ #3ä¸­æ‰€è¿”å›çš„UserDetailsä¸­çš„å¯†ç ï¼›
#5 è®¤è¯æˆåŠŸåï¼Œè¿”å›ä¸€ä¸ª usernamePasswordAuthenticationTokenå¯¹è±¡(Authenticationå®ä¾‹)ï¼›
    å®ƒçš„principal å°±æ˜¯ æ‰€é…ç½®çš„UserDetailsServiceæ‰€è¿”å›çš„ UserDetailsã€‚
    æœ€ç»ˆï¼Œè¿”å›çš„ Authenticationå®ä¾‹ ä¼šè¢« #1ä¸­çš„è®¤è¯Filter ç»™è®¾ç½®åˆ° SecurityContextHolderä¸­å»ã€‚