🔑 解题所需的核心概念
要真正理解本题的高效解法，你需要掌握以下 至少一种 数据结构：

===
✅ 方案一：线段树（Segment Tree） ← 最通用、最推荐
📌 核心思想：
① 将数组 组织成 一棵二叉树，每个节点 代表一个区间 [l, r]
② 叶子节点：单个元素
③ 内部节点：左右子区间之和
④ 支持 区间查询 和 单点更新，时间复杂度 均为 O(log n)

🧠 你需要理解：
概念	                 | 说明
树的构建（build）	     | 自底向上 或 递归构建
单点更新（update）     | 从 叶子向上 更新 路径上的所有父节点
区间查询（query）	     | 递归合并 覆盖目标区间的 子区间 结果
数组式线段树 vs 指针式  | LeetCode 推荐用 数组模拟完全二叉树（更高效）

💡 优势：
① 通用性强（可扩展至 区间更新、最值查询等）
② 思路清晰，适合面试展示

===
✅ 方案二：树状数组（Fenwick Tree / Binary Indexed Tree） ← 更简洁、常数更小
📌 核心思想：
① 利用 lowbit(x) = x & (-x) 快速定位 管辖范围
② 每个位置 i 管理一段 前缀区间
③ 通过 “前缀和相减” 实现 区间和：sum(i, j) = prefixSum(j) - prefixSum(i-1)
④ update 和 prefixSum 均为 O(log n)

🧠 你需要理解：
概念	         | 说明
lowbit 操作	 | 提取最低位的 1（如 lowbit(6)=2，因为 6=110₂）
树状数组的结构 | tree[i] 存储 [i - lowbit(i) + 1, i] 的和
前缀和查询	 | 不断减去 lowbit，累加 tree 值
单点更新	     | 不断加上 lowbit，更新 tree 值

💡 优势：
① 代码短（10 行左右）
② 常数小，运行快
③ 适合竞赛
⚠️ 缺点：较难理解 原理，扩展性 不如 线段树

===
🧩 对比：哪种方法更适合你？
维度	        |   线段树	                | 树状数组
理解难度	    | 中等（递归/分治思想）        | 较高（位运算抽象）
代码长度	    | 较长（30~50 行）	        | 很短（15 行内）
扩展性	    | 极强（支持懒标记、区间更新等）| 弱（主要支持前缀类操作）
面试表现	    | 展示系统设计能力	        | 展示算法技巧
推荐学习顺序	| ✅ 先学线段树	            | 后学 树状数组
🎯 建议初学者 优先掌握 线段树，它是解决 区间问题的“瑞士军刀”。

