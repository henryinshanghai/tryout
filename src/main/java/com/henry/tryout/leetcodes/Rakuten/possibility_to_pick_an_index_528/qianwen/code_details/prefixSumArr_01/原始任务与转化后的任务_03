🧩 全路径总结（一句话串联）
我们将 “按权重随机选索引” 的概率问题，

通过 离散化 为 整数区间划分，
再用 前缀和数组 编码 区间边界，
进而转化为 “在 有序数组 中 找 第一个大于随机数的位置”，
最终用 upper-bound 二分查找 高效求解。